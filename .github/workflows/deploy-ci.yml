name: deploy-ci

on:
  workflow_dispatch:
  push:
    branches:
      - 'main'
  #pull_request:
  #  branches: [ main ]

jobs:
  push_to_registry:
    name: CI-Gateway
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repo
        uses: actions/checkout@v3

#      - name: Get npm cache directory
#        id: npm-cache-dir
#        shell: bash
#        run: echo "dir=$(npm config get cache)" >> ${GITHUB_OUTPUT}
#
#      - name: Apply npm cache
#        uses: actions/cache@v3
#        id: npm-cache # use this to check for `cache-hit` ==> if: steps.npm-cache.outputs.cache-hit != 'true'
#        with:
#          path: ${{ steps.npm-cache-dir.outputs.dir }}
#          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
#          restore-keys: |
#            ${{ runner.os }}-node-

#      - name: Log in to Docker Hub
#        uses: docker/login-action@v1.10.0
#        with:
#          username: ${{ secrets.DOCKERHUB_USERNAME }}
#          password: ${{ secrets.DOCKERHUB_TOKEN }}

      - name: Build project
        run: |
          docker build -t catguild-admin-web:main .
